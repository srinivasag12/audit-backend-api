CREATE OR REPLACE FUNCTION AUDIT_STAG_TEST.MULIPLE_REPLACE_FUN (
   in_text   IN VARCHAR2,
   in_old    IN t_text,
   in_new    IN t_text)
   RETURN VARCHAR2
AS
   v_result   VARCHAR2 (32767);
BEGIN
   IF (in_old.COUNT <> in_new.COUNT)
   THEN
      RETURN in_text;
   END IF;

   v_result := in_text;

   FOR i IN 1 .. in_old.COUNT
   LOOP
      v_result := REPLACE (v_result, in_old (i), in_new (i));
   END LOOP;

   RETURN v_result;
EXCEPTION
   WHEN OTHERS
   THEN
      RETURN 'exception caught';
END;
/
